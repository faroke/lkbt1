<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Test Technique n°1</title>
  <meta name="description" content="Test Technique n°1">
  <meta name="author" content="SitePoint">
  <!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

	<!-- Optional theme -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

  <link rel="stylesheet" href="style.css">
  <script type="text/javascript" src="variables.js"></script> 

</head>

<body>
	<div class="container theme-showcase" role="main">
      <div class="row jumbotron">
      	<div class="col-12 text-center">
	        <h1>Faussette Yann</h1>
      	</div>

      <div class="exercice">
        <div class="row text-center">
          <select id='artisteType'>
            <option selected>Artiste n°1</option>
            <option >Artiste n°2</option>
            <option >Artiste n°3</option>
            <option >Artiste n°4</option>
            <option >Artiste n°5</option>
          </select>
        </div>
        <div class="row text-center">
          <button onclick="generateText()" type="button" class="btn btn-primary">Générer le badge</button>
        </div>
      </div>  
      </div>
      <h2>Présentation de l'exercice :</h2>
      <p>L'objectif de cet exercice est de créer un générateur de badge en code HTML.</p>
      <p>Une fois le badge généré on peut le copier-coller et l'intégrer à n'importe quelle autre page HTML.</p>
      <p>Une fois intégré sur une page HTML, ce badge est une image. Voir <a target="_blank" href="badge.html">ici</a>.</p>
      <p> En inspectant le code source (cf image en bas), on peut voir que le badge est une balise "a" avec un lien et une image "img". Cette image contient un attribut <b>alt</b>.</a>
      <div class="row">
        <div class="col-10 offset-10">
          <img class="fit-picture" src="img/badge.png">
        </div>
      </div>
      <h2>Fonctionnement du générateur :</h2>
      <p>Le générateur doit contenir un select et un bouton de validation.</p>
      <div class="row">
        <div class="col-10 offset-10">
          <img class="fit-picture" src="img/badge1.png">
        </div>
      </div>
      <p>Le select permet de choisir un des 5 artistes pour lequel le badge est généré.</p>
      <p>L'attribut <b>alt</b> est différent selon l'artiste choisi.</p>
      <div class="row">
        <div class="col-10 offset-10">
          <img class="fit-picture" src="img/badge2.png">
        </div>
      </div>
      <p>En cliquant sur le bouton "Générer le badge", le code html du badge apparaît en dessous.</p>
      <div class="row">
        <div class="col-10 offset-10">
          <img class="fit-picture" src="img/badge3.png">
        </div>
      </div>
      <p>Je n'ai plus qu'à copier le code du badge pour le coller dans une nouvelle page html et voir mon image apparaître.</p>

      <h2>Définition des artistes :</h2>
        <ul>
          <li>Les 5 artistes sont définis dans le fichier variables.js.</li>
          <li>Un artiste possède un attribut nbmembres compris entre 1 et 5.</li>
          <li>Un artiste a entre 1 et 5 styles.</li>
          <li>Un artiste a une localisation.</li>
        </ul>
      <h2>Construction des alt :</h2>
        <ul>
          <li>Le alt est une chaîne de caractères.</li>
          <li>Le premier mot est sélectionné au hasard parmi "Recherche", "Devis", "Tarifs", "Prix", "Reservation", "Cherche" avec une probabilité de 1/6.</li>
          <li>Le deuxième mot est le type de l'artiste.<br>
          Un artiste est un DJ s'il a le style "STYLES.DJ".<br>
          Sinon soit c'est un groupe de musique si nbmembres > 2 sinon c'est un musicien.</li>
          <li>Le troisième mot est la localisation de l'artiste dans 50% des cas. 
          <br>Dans les 50% autres cas, c'est tous les styles de l'artiste ajoutés à la suite.</li>
          <li><b>Il est conseillé de regarder les alt des photos d'au dessus pour bien comprendre la construction avant de coder.</b></li>
        </ul>
      <h2>Remarques :</h2>
        <ul>
          <li>Une fois le badge généré, si je clique à nouveau sur "Générer le badge" le badge se met à jour avec un nouveau <b>alt</b>.</li>
          <li>Après avoir généré un badge pour un certain artiste, je dois pouvoir en séléctioner un autre pour générer le sien.</li>
          <li>La photo et le lien href du badge sont au choix</li>
        </ul>
      <h2>Consignes :</h2>
      <ul>
        <li> Pense à bien mettre ton nom à la place de "Test Technique n°1" + ajouter le temps mis pour faire l'exercice</li>
        <li>L'utilisation d'internet est autorisée</li>
        <li>L'exercice est à faire sans aide extérieure</li>
        <li> Les critères de notations sont :<br>
          1. Réussite de l'exercice<br>
          2. Clarté et lisiblité du code<br>
          3. Autonomie (ne veut pas dire aucune question au contraire)<br>
          4. Temps mis pour réaliser l'exercice<br>
          5. Bonus important: Un design sympa sera grandement apprécié (fichier style.css)<br>
      </ul>
    </div> <!-- /container -->
</body>
</html>
<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="variables.js" type="text/javascript"></script>
<script>
const artArray = [artiste1, artiste2, artiste3, artiste4, artiste5];
const randomString = ["Recherche", "Devis", "Tarifs", "Prix", "Reservation", "Cherche"];
let exist = false;
function getRandomInt(max) {
  return Math.floor(Math.random() * max);
}
function get2ndWord(artiste) {
  if(Object.values(artArray[artiste].styles).some(e => e.name === "STYLE.DJ"))
    return "DJ";
  else if(artArray[artiste].nbmembres >= 2)
    return "groupe de musique";
  return "musicien";
}
function getLocalisation(artiste) {
  return artArray[artiste].localisation;
}
function getStyles(artiste) {
  return Object.values(artArray[artiste].styles).map(e => e.name.slice(6).toLowerCase()).join(" ");
}
function generateText() {
  const select = document.getElementById("artisteType").value.substr(-1) - 1;
  const result = `<!--Badge--><a href='https://fr.wikipedia.org/wiki/Music' target='_blank'><img src='https://www.gstatic.com/webp/gallery/1.jpg' alt='${randomString[getRandomInt(6)]} ${get2ndWord(select)} ${getRandomInt(2) === 1 ? getLocalisation(select) : getStyles(select)}' style='width: 130px; heigth: 130px;'/><a>`;
  const lastDiv = document.getElementsByClassName("row text-center")[1];
  if(exist){
    const el = document.getElementById("elem");
    el.innerText = result;
  }
  else{
    const lastDiv = document.getElementsByClassName("row text-center")[1];
    const newP = document.createElement("p");
    newP.className = "text-center red";
    newP.innerText = result;
    newP.id = "elem";
    lastDiv.parentNode.insertBefore(newP, lastDiv);
    exist = true;
  }
}

</script>